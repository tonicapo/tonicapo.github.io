$(window).ready(function(){function a(a,b){a.mouseover(function(){b[0].attr("xlink:href",b[2])}),a.mouseout(function(){b[0].attr("xlink:href",b[1])})}function b(a){c(a),g.click(function(){g.removeClass("selected"),$(this).addClass("selected"),f=$(this).children("p").html().toString(),console.log(f)}),j.click(function(){j.removeClass("selected"),$(this).addClass("selected"),i=h.text();var a=$(this).attr("id");switch(console.log($(this).html()),d(i)){case"p":console.log("case p"),"h1"==a?e(h,i,"p","h1"):"h2"==a?e(h,i,"p","h2"):e(h,i,"p","");break;case"h1":console.log("case h1"),"p"==a?e(h,i,"h1","p"):"h2"==a?e(h,i,"h1","h2"):e(h,i,"h1","");break;case"h2":console.log("case h2"),"p"==a?e(h,i,"h2","p"):"h1"==a?e(h,i,"h2","h1"):e(h,i,"h2","");break;case null:if(console.log("case null"),"p"==a)e(h,i,null,"p");else if("h1"==a)e(h,i,null,"h1");else{if("h2"!=a)break;e(h,i,null,"h2")}}}),u.click(function(){switch(console.log(f),f){case"S":h.html(q[Math.round(Math.random()*q.length)]),console.log("short");break;case"M":h.html(r[Math.round(Math.random()*r.length)]),console.log("medium");break;case"L":h.html(s[Math.round(Math.random()*s.length)]),console.log("long");break;default:h.html("Vous devez choisir une longueur de texte")}})}function c(a){console.log(a),$.each(a.citations,function(a,b){"short"==b.cite.type&&q.push(b.cite.text),"medium"==b.cite.type&&r.push(b.cite.text),"long"==b.cite.type&&s.push(b.cite.text)})}function d(a){return a.indexOf("<p>")>=0?"p":a.indexOf("<h1>")>=0?"h1":a.indexOf("<h2>")>=0?"h2":null}function e(a,b,c,d){""!==a.text()&&(null===c?b="<"+d+">"+b+"</"+d+">":null!==c&&""===d?(b=b.replace("<"+c+">",""),b=b.replace("</"+c+">","")):(b=b.replace("<"+c+">","<"+d+">"),b=b.replace("</"+c+">","</"+d+">"),console.log(b)),a.text(b))}var f="S",g=$(".smaller"),h=$("section"),i="",j=$("#submenu li"),k=new ZeroClipboard($(".clip_button"),{moviePath:"ZeroClipboard.swf",debug:!1});k.on("ready",function(){k.on("copy",function(a){a.clipboardData.setData("text/plain",h.html())}),k.on("aftercopy",function(a){console.log("Copied text to clipboard: "+a.data["text/plain"])})}),k.on("error",function(){ZeroClipboard.destroy()});var l=$(window),m=l.width(),n=l.height();console.log("wpwidth"+m),console.log("wpheight"+n);var o=$("#backgroundtext"),p=$("footer"),q=[],r=[],s=[];if(m>360&&1153>m?($("#polygon1").attr("points","0 125, 576 -20, 576 270"),$("#polygon2").attr("points","50 125, 576 20, 576 230")):($("#polygon1").attr("points","0 125,"+m/2+" -20,"+m/2+" 270"),$("#polygon2").attr("points","50 125,"+m/2+" 20,"+m/2+" 230")),n>p.offset().top+p.height()){console.log("footer offset"+p.offset().top),p.offset({top:n-p.height()-9}),console.log("footer offset"+p.offset().top);var t=p.offset().top-(h.offset().top+h.height()/2);console.log(t),o.height(t),console.log(o.height()),o.offset({top:h.offset().top+h.height()/2})}var u=$("#btngenerate");$("#btnoptions"),$("#btnS"),$("#btnM"),$("#btnL");var v=$("#btncopy"),w=[$("#iconleft"),"#icon-left","#icon-left-white"],x=[$("#iconcopy"),"#icon-copy","#icon-copy-white"];a(u,w),a(v,x),$("nav li").mouseover(function(){$(this).addClass("active")}).mouseout(function(){$(this).removeClass("active")}),$.ajax({url:"./json/citations.json",mimeType:"application/json; charset=utf-8",complete:function(){},error:function(a,b,c){console.log(c)},success:function(a){b(a)}})});