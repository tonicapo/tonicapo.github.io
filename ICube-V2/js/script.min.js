$(window).ready(function(){function a(a,b){a.mouseover(function(){b[0].attr("xlink:href",b[2])}),a.mouseout(function(){b[0].attr("xlink:href",b[1])})}function b(a){c(a),g.click(function(){g.removeClass("selected"),$(this).addClass("selected"),f=$(this).children("p").html().toString(),console.log(f)}),k.click(function(){k.removeClass("selected"),$(this).addClass("selected"),j=i.text();var a=$(this).attr("id");switch(console.log($(this).html()),d(j)){case"p":console.log("case p"),"h1"==a?e(i,j,"p","h1"):"h2"==a?e(i,j,"p","h2"):e(i,j,"p","");break;case"h1":console.log("case h1"),"p"==a?e(i,j,"h1","p"):"h2"==a?e(i,j,"h1","h2"):e(i,j,"h1","");break;case"h2":console.log("case h2"),"p"==a?e(i,j,"h2","p"):"h1"==a?e(i,j,"h2","h1"):e(i,j,"h2","");break;case null:if(console.log("case null"),"p"==a)e(i,j,null,"p");else if("h1"==a)e(i,j,null,"h1");else{if("h2"!=a)break;e(i,j,null,"h2")}}}),v.click(function(){switch(console.log(f),f){case"S":h.html(r[Math.round(Math.random()*r.length)]),console.log("short");break;case"M":h.html(s[Math.round(Math.random()*s.length)]),console.log("medium");break;case"L":h.html(t[Math.round(Math.random()*t.length)]),console.log("long");break;default:h.html("Vous devez choisir une longueur de texte")}})}function c(a){console.log(a),$.each(a.citations,function(a,b){"short"==b.cite.type&&r.push(b.cite.text),"medium"==b.cite.type&&s.push(b.cite.text),"long"==b.cite.type&&t.push(b.cite.text)})}function d(a){return a.indexOf("<p>")>=0?"p":a.indexOf("<h1>")>=0?"h1":a.indexOf("<h2>")>=0?"h2":null}function e(a,b,c,d){""!==a.text()&&(null===c?b="<"+d+">"+b+"</"+d+">":null!==c&&""===d?(b=b.replace("<"+c+">",""),b=b.replace("</"+c+">","")):(b=b.replace("<"+c+">","<"+d+">"),b=b.replace("</"+c+">","</"+d+">"),console.log(b)),a.text(b))}var f="S",g=$(".smaller"),h=$("section"),i=$("section"),j="",k=$("#submenu li"),l=new ZeroClipboard($(".clip_button"),{moviePath:"ZeroClipboard.swf",debug:!1});l.on("ready",function(){l.on("copy",function(a){a.clipboardData.setData("text/plain",i.innerHTML)}),l.on("aftercopy",function(a){console.log("Copied text to clipboard: "+a.data["text/plain"])})}),l.on("error",function(){ZeroClipboard.destroy()});var m=$(window),n=m.width(),o=m.height();console.log("wpwidth"+n),console.log("wpheight"+o);var p=$("#backgroundtext"),q=$("footer"),r=[],s=[],t=[];if(n>360&&1153>n?($("#polygon1").attr("points","0 125, 576 -20, 576 270"),$("#polygon2").attr("points","50 125, 576 20, 576 230")):($("#polygon1").attr("points","0 125,"+n/2+" -20,"+n/2+" 270"),$("#polygon2").attr("points","50 125,"+n/2+" 20,"+n/2+" 230")),o>q.offset().top+q.height()){console.log("footer offset"+q.offset().top),q.offset({top:o-q.height()-9}),console.log("footer offset"+q.offset().top);var u=q.offset().top-($("section").offset().top+$("section").height()/2);console.log(u),p.height(u),console.log(p.height()),p.offset({top:$("section").offset().top+$("section").height()/2})}var v=$("#btngenerate");$("#btnoptions"),$("#btnS"),$("#btnM"),$("#btnL");var w=$("#btncopy"),x=[$("#iconleft"),"#icon-left","#icon-left-white"],y=[$("#iconcopy"),"#icon-copy","#icon-copy-white"];a(v,x),a(w,y),$("nav li").mouseover(function(){$(this).addClass("active")}).mouseout(function(){$(this).removeClass("active")}),$.ajax({url:"./json/citations.json",mimeType:"application/json; charset=utf-8",complete:function(){},error:function(a,b,c){console.log(c)},success:function(a){b(a)}})});