$(window).ready(function(){function a(a,b){a.mouseover(function(){b[0].attr("xlink:href",b[2])}),a.mouseout(function(){b[0].attr("xlink:href",b[1])})}function b(a){var b="S",f=$(".smaller"),g=$("section"),h=$("section"),i="",j=$("#submenu li");c(a),f.click(function(){f.removeClass("selected"),$(this).addClass("selected"),b=$(this).children("p").html().toString(),console.log(b)}),j.click(function(){j.removeClass("selected"),$(this).addClass("selected"),i=h.text();var a=$(this).attr("id");switch(console.log($(this).html()),d(i)){case"p":console.log("case p"),"h1"==a?e(h,i,"p","h1"):"h2"==a?e(h,i,"p","h2"):e(h,i,"p","");break;case"h1":console.log("case h1"),"p"==a?e(h,i,"h1","p"):"h2"==a?e(h,i,"h1","h2"):e(h,i,"h1","");break;case"h2":console.log("case h2"),"p"==a?e(h,i,"h2","p"):"h1"==a?e(h,i,"h2","h1"):e(h,i,"h2","");break;case null:if(console.log("case null"),"p"==a)e(h,i,null,"p");else if("h1"==a)e(h,i,null,"h1");else{if("h2"!=a)break;e(h,i,null,"h2")}}}),p.click(function(){switch(console.log(b),b){case"S":g.html(l[Math.round(Math.random()*l.length)]),console.log("short");break;case"M":g.html(m[Math.round(Math.random()*m.length)]),console.log("medium");break;case"L":g.html(n[Math.round(Math.random()*n.length)]),console.log("long");break;default:g.html("Vous devez choisir une longueur de texte")}})}function c(a){console.log(a),$.each(a.citations,function(a,b){"short"==b.cite.type&&l.push(b.cite.text),"medium"==b.cite.type&&m.push(b.cite.text),"long"==b.cite.type&&n.push(b.cite.text)})}function d(a){return a.indexOf("<p>")>=0?"p":a.indexOf("<h1>")>=0?"h1":a.indexOf("<h2>")>=0?"h2":null}function e(a,b,c,d){""!==a.text()&&(null===c?b="<"+d+">"+b+"</"+d+">":null!==c&&""===d?(b=b.replace("<"+c+">",""),b=b.replace("</"+c+">","")):(b=b.replace("<"+c+">","<"+d+">"),b=b.replace("</"+c+">","</"+d+">"),console.log(b)),a.text(b))}var f=new ZeroClipboard($(".clip_button"),{moviePath:"ZeroClipboard.swf",debug:!1});f.on("ready",function(){f.on("copy",function(a){a.clipboardData.setData("text/plain",a.target.innerHTML)}),f.on("aftercopy",function(a){console.log("Copied text to clipboard: "+a.data["text/plain"])})}),f.on("error",function(){ZeroClipboard.destroy()});var g=$(window),h=g.width(),i=g.height();console.log("wpwidth"+h),console.log("wpheight"+i);var j=$("#backgroundtext"),k=$("footer"),l=[],m=[],n=[];if(h>360&&1153>h?($("#polygon1").attr("points","0 125, 576 -20, 576 270"),$("#polygon2").attr("points","50 125, 576 20, 576 230")):($("#polygon1").attr("points","0 125,"+h/2+" -20,"+h/2+" 270"),$("#polygon2").attr("points","50 125,"+h/2+" 20,"+h/2+" 230")),i>k.offset().top+k.height()){console.log("footer offset"+k.offset().top),k.offset({top:i-k.height()-9}),console.log("footer offset"+k.offset().top);var o=k.offset().top-($("section").offset().top+$("section").height()/2);console.log(o),j.height(o),console.log(j.height()),j.offset({top:$("section").offset().top+$("section").height()/2})}var p=$("#btngenerate");$("#btnoptions"),$("#btnS"),$("#btnM"),$("#btnL");var q=$("#btncopy"),r=[$("#iconleft"),"#icon-left","#icon-left-white"],s=[$("#iconcopy"),"#icon-copy","#icon-copy-white"];a(p,r),a(q,s),$("nav li").mouseover(function(){$(this).addClass("active")}).mouseout(function(){$(this).removeClass("active")}),$.ajax({url:"./json/citations.json",mimeType:"application/json; charset=utf-8",complete:function(){},error:function(a,b,c){console.log(c)},success:function(a){b(a)}})});